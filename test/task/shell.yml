doc: Built file to test tasks
default: task_$

properties:
  BUILD_DIR: "../../build"

targets:

  task_$:
    doc: Test task $
    steps:
    - if: '_OS != "windows"'
      then:
      # test shell
      - $: 'echo "TEST"'
        =: 'result'
      - |
        if result != "TEST" {
          throw("$ test failure")
        } else {
          println("$ test success")
        }
      # test command
      - $: ['echo', 'TEST']
        =: 'result'
      - |
        if result != "TEST" {
          throw("$ test failure")
        } else {
          println("$ test success")
        }
      # test shell with property
      - 'message = "foo"'
      - $: 'echo "#{message}"'
        =: 'result'
      - |
        if result != "foo" {
          throw("$ test failure")
        } else {
          println("$ test success")
        }
      # test command with property
      - 'message = "foo"'
      - $: ['echo', '#{message}']
        =: 'result'
      - |
        if result != "foo" {
          throw("$ test failure")
        } else {
          println("$ test success")
        }
      # test shell per OS
      - $:
          default: 'echo "TEST"'
          windows: 'fail'
        =: 'result'
      - |
        if result != "TEST" {
          throw("$ test failure")
        } else {
          println("$ test success")
        }
