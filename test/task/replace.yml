doc: Built file to test tasks
default: task_replace

properties:
  BUILD_DIR: "../../build"

targets:

  task_replace:
    doc: Test task replace
    steps:
    - mkdir: "#{BUILD_DIR}/replace"
    - write: "#{BUILD_DIR}/replace/test.txt"
      text: "Hello World!"
    - replace: "#{BUILD_DIR}/replace/test.txt"
      pattern: "World"
      with: "You"
    - |
      ioutil = import("io/ioutil")
      filepath = import("path/filepath")
      file = filepath.Join(BUILD_DIR, "replace", "test.txt")
      content, err = ioutil.ReadFile(file)
      if err != nil {
        throw("Write test failure")
      }
      if toString(content) != "Hello You!" {
        throw("Write test failure")
      }
      println("Write test sucess")
